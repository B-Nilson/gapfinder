<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Identifies Coverage Gaps in Monitoring Networks â€¢ gapfinder</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Identifies Coverage Gaps in Monitoring Networks">
<meta property="og:description" content="Many monitoring networks do not have full coverage of their intended targets. Network managers are usually working with limited budgets for expanding exisiting networks, and knowing where to prioritize installations to maximize coverage is a useful tool for planning. gapfinder provides the abiliity to identify optimal installation locations to meet coverage goals. You can provide potential installation locations, exisiting monitoring locations (if any), locations desired to be covered, and individual prioritization weights for potential locations and locations to be covered. In return, gapfinder will calculate the optimal locations to cover as much as possible, minimizing overlap, and allows for prioritizing installations based on unique coverage of each installation.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">gapfinder</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="gapfinder">gapfinder<a class="anchor" aria-label="anchor" href="#gapfinder"></a>
</h1></div>
<!-- badges: start -->

<p>Many monitoring networks do not have full coverage of their intended targets. Network managers are usually working with limited budgets for expanding exisiting networks, and knowing where to prioritize installations to maximize coverage is a useful tool for planning.</p>
<p>gapfinder provides the abiliity to identify optimal installation locations to meet coverage goals.</p>
<p>You can provide potential installation locations, exisiting monitoring locations (if any), locations desired to be covered, and individual prioritization weights for potential locations and locations to be covered. In return, gapfinder will calculate the optimal locations to cover as much as possible, minimizing overlap, and allows for prioritizing installations based on unique coverage of each installation.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of gapfinder like so:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"B-Nilson/gapfinder"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>This is a basic example which shows you how to solve a common problem:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">gapfinder</span><span class="op">)</span></span>
<span><span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_installed.html" class="external-link">check_installed</a></span><span class="op">(</span><span class="st">"canadata"</span><span class="op">)</span></span>
<span><span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_installed.html" class="external-link">check_installed</a></span><span class="op">(</span><span class="st">"aqmapr"</span><span class="op">)</span></span>
<span><span class="co"># pak::pak("B-Nilson/canadata") # in case above fails</span></span>
<span></span>
<span><span class="co"># Define where we could install monitors (Yukon communities)</span></span>
<span><span class="va">install_at</span> <span class="op">&lt;-</span> <span class="fu">canadata</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/canadata/man/communities.html" class="external-link">communities</a></span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">prov_terr</span> <span class="op">==</span> <span class="st">"YT"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span>coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lng"</span>, <span class="st">"lat"</span><span class="op">)</span>, crs <span class="op">=</span> <span class="st">"WGS84"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># Cities are easier to install than hamlets</span></span>
<span>  <span class="co"># here they provide 4x more coverage (4 levels of type)</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>ease_of_install <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">type</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">type</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define what we want the monitors to cover (Yukon population)</span></span>
<span><span class="va">to_cover</span> <span class="op">&lt;-</span> <span class="fu">canadata</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/canadata/man/gridded_2016_population.html" class="external-link">gridded_2016_population</a></span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">prov_terrs</span>, <span class="st">"YT"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># any cell that intersects Yukon</span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span>coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lng"</span>, <span class="st">"lat"</span><span class="op">)</span>, crs <span class="op">=</span> <span class="st">"WGS84"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define existing monitors (Canadian PM2.5 monitoring network - NAPS, PurpleAir, and AQEgg networks)</span></span>
<span><span class="va">existing_locations</span> <span class="op">&lt;-</span> <span class="st">"https://aqmap.ca/aqmap/data/aqmap_most_recent_obs.csv"</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span>site_id <span class="op">=</span> <span class="va">sensor_index</span>, <span class="va">network</span>, <span class="va">lng</span>, <span class="va">lat</span>, name <span class="op">=</span> <span class="va">monitor</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span>coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lng"</span>, <span class="st">"lat"</span><span class="op">)</span>, crs <span class="op">=</span> <span class="st">"WGS84"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Find the optimal locations to get all YT population within 10 km of a monitor</span></span>
<span><span class="co"># Coverage depends on population x ease of install</span></span>
<span><span class="va">optimized_locations</span> <span class="op">&lt;-</span> <span class="va">install_at</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/optimize_coverage.html">optimize_coverage</a></span><span class="op">(</span></span>
<span>    to_cover <span class="op">=</span> <span class="va">to_cover</span>,</span>
<span>    existing_locations <span class="op">=</span> <span class="va">existing_locations</span>,</span>
<span>    cover_distance <span class="op">=</span> <span class="fu">units</span><span class="fu">::</span><span class="fu"><a href="https://r-quantities.github.io/units/reference/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="fl">25</span>, <span class="st">"km"</span><span class="op">)</span>,</span>
<span>    weight_columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ease_of_install"</span>, <span class="st">"total_population"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># View the results</span></span>
<span><span class="va">install_at</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;      name                type      prov_terr   fcst_zone        </span></span>
<span><span class="co">#&gt;  Length:66          city   : 1   YT     :66   Length:66         </span></span>
<span><span class="co">#&gt;  Class :character   town   : 7   BC     : 0   Class :character  </span></span>
<span><span class="co">#&gt;  Mode  :character   village: 7   AB     : 0   Mode  :character  </span></span>
<span><span class="co">#&gt;                     hamlet :51   SK     : 0                     </span></span>
<span><span class="co">#&gt;                                  MB     : 0                     </span></span>
<span><span class="co">#&gt;                                  ON     : 0                     </span></span>
<span><span class="co">#&gt;                                  (Other): 0                     </span></span>
<span><span class="co">#&gt;           geometry  ease_of_install</span></span>
<span><span class="co">#&gt;  POINT        :66   Min.   :1.000  </span></span>
<span><span class="co">#&gt;  epsg:4326    : 0   1st Qu.:1.000  </span></span>
<span><span class="co">#&gt;  +proj=long...: 0   Median :1.000  </span></span>
<span><span class="co">#&gt;                     Mean   :1.364  </span></span>
<span><span class="co">#&gt;                     3rd Qu.:1.000  </span></span>
<span><span class="co">#&gt;                     Max.   :4.000  </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="va">to_cover</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;   prov_terrs          fcst_zone         total_land_area total_population </span></span>
<span><span class="co">#&gt;  Length:105         Length:105         Min.   :41.80   Min.   :    5.0  </span></span>
<span><span class="co">#&gt;  Class :character   Class :character   1st Qu.:90.30   1st Qu.:   15.0  </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character   Median :94.00   Median :   45.0  </span></span>
<span><span class="co">#&gt;                                        Mean   :89.66   Mean   :  341.3  </span></span>
<span><span class="co">#&gt;                                        3rd Qu.:94.30   3rd Qu.:  130.0  </span></span>
<span><span class="co">#&gt;                                        Max.   :94.50   Max.   :17175.0  </span></span>
<span><span class="co">#&gt;  rural_population          geometry  </span></span>
<span><span class="co">#&gt;  Min.   :   5.0   POINT        :105  </span></span>
<span><span class="co">#&gt;  1st Qu.:  15.0   epsg:4326    :  0  </span></span>
<span><span class="co">#&gt;  Median :  45.0   +proj=long...:  0  </span></span>
<span><span class="co">#&gt;  Mean   : 134.3                      </span></span>
<span><span class="co">#&gt;  3rd Qu.: 130.0                      </span></span>
<span><span class="co">#&gt;  Max.   :1450.0</span></span>
<span><span class="va">existing_locations</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;    site_id            network              name                    geometry   </span></span>
<span><span class="co">#&gt;  Length:2877        Length:2877        Length:2877        POINT        :2877  </span></span>
<span><span class="co">#&gt;  Class :character   Class :character   Class :character   epsg:4326    :   0  </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character   Mode  :character   +proj=long...:   0</span></span>
<span><span class="va">optimized_locations</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;      name                type     prov_terr   fcst_zone        </span></span>
<span><span class="co">#&gt;  Length:10          city   :0   YT     :10   Length:10         </span></span>
<span><span class="co">#&gt;  Class :character   town   :1   BC     : 0   Class :character  </span></span>
<span><span class="co">#&gt;  Mode  :character   village:1   AB     : 0   Mode  :character  </span></span>
<span><span class="co">#&gt;                     hamlet :8   SK     : 0                     </span></span>
<span><span class="co">#&gt;                                 MB     : 0                     </span></span>
<span><span class="co">#&gt;                                 ON     : 0                     </span></span>
<span><span class="co">#&gt;                                 (Other): 0                     </span></span>
<span><span class="co">#&gt;           geometry  ease_of_install</span></span>
<span><span class="co">#&gt;  POINT        :10   Min.   :1.0    </span></span>
<span><span class="co">#&gt;  epsg:4326    : 0   1st Qu.:1.0    </span></span>
<span><span class="co">#&gt;  +proj=long...: 0   Median :1.0    </span></span>
<span><span class="co">#&gt;                     Mean   :1.3    </span></span>
<span><span class="co">#&gt;                     3rd Qu.:1.0    </span></span>
<span><span class="co">#&gt;                     Max.   :3.0    </span></span>
<span><span class="co">#&gt; </span></span>
<span></span>
<span><span class="co"># Map the results</span></span>
<span><span class="fu"><a href="reference/plot_coverage.html">plot_coverage</a></span><span class="op">(</span></span>
<span>  install_at <span class="op">=</span> <span class="va">install_at</span>,</span>
<span>  to_cover <span class="op">=</span> <span class="va">to_cover</span>,</span>
<span>  existing_locations <span class="op">=</span> <span class="va">existing_locations</span>,</span>
<span>  optimized_locations <span class="op">=</span> <span class="va">optimized_locations</span>,</span>
<span>  cover_distance <span class="op">=</span> <span class="fu">units</span><span class="fu">::</span><span class="fu"><a href="https://r-quantities.github.io/units/reference/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="fl">25</span>, <span class="st">"km"</span><span class="op">)</span>,</span>
<span>  weight_columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"Ease of Install\n(Community Type)"</span> <span class="op">=</span> <span class="st">"ease_of_install"</span>,</span>
<span>    <span class="st">"2016 Population\n(To Cover)"</span> <span class="op">=</span> <span class="st">"total_population"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  in_canada <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: attribute variables are assumed to be spatially constant throughout</span></span>
<span><span class="co">#&gt; all geometries</span></span></code></pre></div>
<p><img src="reference/figures/README-example-1.png" width="100%"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing gapfinder</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Brayden Nilson <br><small class="roles"> Author, maintainer </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://CRAN.R-project.org/package=gapfinder" class="external-link"><img src="https://www.r-pkg.org/badges/version/gapfinder" alt="CRAN status"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Brayden Nilson.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
